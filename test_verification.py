#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–¥—É–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
–ó–∞–ø—É—Å–∫: python test_verification.py
"""

import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –º–æ–¥—É–ª—è–º
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from tools.verification_tools import (
    save_verification,
    is_client_verified,
    check_verification,
    reset_verification,
    get_all_verifications,
)


def test_verification_flow():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏"""
    
    print("üß™ –¢–µ—Å—Ç –º–æ–¥—É–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤\n")
    print("="*60)
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    test_user_id = 999888777
    test_login = "12345"
    
    # –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
    print("\nüìù –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏")
    print(f"   –ü—Ä–æ–≤–µ—Ä—è–µ–º user_id={test_user_id}, login={test_login}")
    result = check_verification(test_user_id, test_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert result == f"not_verified|{test_login}", "‚ùå –û—à–∏–±–∫–∞: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å not_verified!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
    
    # –¢–µ—Å—Ç 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
    print("\nüìù –¢–µ—Å—Ç 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏")
    result = save_verification(test_user_id, test_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "‚úÖ" in result, "‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")
    
    # –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
    print("\nüìù –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏")
    result = check_verification(test_user_id, test_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert result == f"verified|{test_login}", "‚ùå –û—à–∏–±–∫–∞: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å verified!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞")
    
    # –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ is_client_verified
    print("\nüìù –¢–µ—Å—Ç 4: –§—É–Ω–∫—Ü–∏—è is_client_verified")
    result = is_client_verified(test_user_id, test_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert result is True, "‚ùå –û—à–∏–±–∫–∞: –¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å True!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: is_client_verified —Ä–∞–±–æ—Ç–∞–µ—Ç")
    
    # –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä—É–≥–æ–≥–æ –ª–æ–≥–∏–Ω–∞ (–¥–æ–ª–∂–Ω–∞ –Ω–µ –ø—Ä–æ–π—Ç–∏)
    print("\nüìù –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä—É–≥–æ–≥–æ –ª–æ–≥–∏–Ω–∞")
    other_login = "99999"
    result = check_verification(test_user_id, other_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert result == f"not_verified|{other_login}", "‚ùå –û—à–∏–±–∫–∞: –¥—Ä—É–≥–æ–π –ª–æ–≥–∏–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å verified!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: –¥—Ä—É–≥–æ–π –ª–æ–≥–∏–Ω –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω")
    
    # –¢–µ—Å—Ç 6: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π
    print("\nüìù –¢–µ—Å—Ç 6: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π")
    result = get_all_verifications()
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç:\n{result}")
    assert str(test_user_id) in result, "‚ùå –û—à–∏–±–∫–∞: –Ω–∞—à user_id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: —Å–ø–∏—Å–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π –ø–æ–ª—É—á–µ–Ω")
    
    # –¢–µ—Å—Ç 7: –°–±—Ä–æ—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
    print("\nüìù –¢–µ—Å—Ç 7: –°–±—Ä–æ—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏")
    result = reset_verification(test_user_id)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "‚úÖ" in result, "‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–±—Ä–æ—à–µ–Ω–∞")
    
    # –¢–µ—Å—Ç 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞
    print("\nüìù –¢–µ—Å—Ç 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞")
    result = check_verification(test_user_id, test_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert result == f"not_verified|{test_login}", "‚ùå –û—à–∏–±–∫–∞: –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å not_verified!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —Å–±—Ä–æ—à–µ–Ω–∞")
    
    # –¢–µ—Å—Ç 9: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Å–±—Ä–æ—Å (–∫–æ–≥–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ—Ç)
    print("\nüìù –¢–µ—Å—Ç 9: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Å–±—Ä–æ—Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏")
    result = reset_verification(test_user_id)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "–Ω–µ –Ω–∞–π–¥–µ–Ω–∞" in result.lower() or "–Ω–µ –Ω–∞–π–¥–µ–Ω–æ" in result.lower(), "‚ùå –û—à–∏–±–∫–∞: –¥–æ–ª–∂–Ω–æ —Å–æ–æ–±—â–∏—Ç—å —á—Ç–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    print("   ‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏")
    
    print("\n" + "="*60)
    print("üéâ –ë–ê–ó–û–í–´–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!")
    print("="*60)


def test_multiple_children():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–µ—Ç—å–º–∏"""
    
    print("\n\nüë®‚Äçüë©‚Äçüëß‚Äçüë¶ –¢–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è: –ù–µ—Å–∫–æ–ª—å–∫–æ –¥–µ—Ç–µ–π —É –æ–¥–Ω–æ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è\n")
    print("="*60)
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    parent_id = 111222333
    child1_login = "46168"
    child2_login = "50001"
    child3_login = "41304"
    
    # –¢–µ—Å—Ç 1: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞
    print("\nüìù –¢–µ—Å—Ç 1: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞")
    result = save_verification(parent_id, child1_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "‚úÖ" in result, "‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞!"
    print("   ‚úÖ –ü–µ—Ä–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω")
    
    # –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞
    print("\nüìù –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞")
    result = check_verification(parent_id, child1_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert result == f"verified|{child1_login}", "‚ùå –ü–µ—Ä–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å verified!"
    print("   ‚úÖ –ü–µ—Ä–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω")
    
    # –¢–µ—Å—Ç 3: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞
    print("\nüìù –¢–µ—Å—Ç 3: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞")
    result = save_verification(parent_id, child2_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "‚úÖ" in result and "2" in result, "‚ùå –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å '–≤—Å–µ–≥–æ –¥–µ—Ç–µ–π: 2'!"
    print("   ‚úÖ –í—Ç–æ—Ä–æ–π —Ä–µ–±—ë–Ω–æ–∫ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω")
    
    # –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–æ–∏—Ö –¥–µ—Ç–µ–π
    print("\nüìù –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–æ–∏—Ö –¥–µ—Ç–µ–π")
    result1 = check_verification(parent_id, child1_login)
    result2 = check_verification(parent_id, child2_login)
    print(f"   –†–µ–±—ë–Ω–æ–∫ 1: {result1}")
    print(f"   –†–µ–±—ë–Ω–æ–∫ 2: {result2}")
    assert result1 == f"verified|{child1_login}", "‚ùå –ü–µ—Ä–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫ –ø–æ—Ç–µ—Ä—è–Ω!"
    assert result2 == f"verified|{child2_login}", "‚ùå –í—Ç–æ—Ä–æ–π —Ä–µ–±—ë–Ω–æ–∫ –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω!"
    print("   ‚úÖ –û–±–∞ —Ä–µ–±—ë–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏")
    
    # –¢–µ—Å—Ç 5: –¢—Ä–µ—Ç–∏–π —Ä–µ–±—ë–Ω–æ–∫
    print("\nüìù –¢–µ—Å—Ç 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–±—ë–Ω–∫–∞")
    result = save_verification(parent_id, child3_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "3" in result, "‚ùå –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å '–≤—Å–µ–≥–æ –¥–µ—Ç–µ–π: 3'!"
    print("   ‚úÖ –¢—Ä–µ—Ç–∏–π —Ä–µ–±—ë–Ω–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω")
    
    # –¢–µ—Å—Ç 6: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π
    print("\nüìù –¢–µ—Å—Ç 6: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π")
    result = get_all_verifications()
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç:\n{result}")
    assert "üë∂ –î–µ—Ç–µ–π: 3" in result, "‚ùå –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 3 –¥–µ—Ç–µ–π!"
    assert child1_login in result and child2_login in result and child3_login in result, "‚ùå –í—Å–µ –ª–æ–≥–∏–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ!"
    print("   ‚úÖ –í—Å–µ —Ç—Ä–∏ —Ä–µ–±—ë–Ω–∫–∞ –≤ —Å–ø–∏—Å–∫–µ")
    
    # –¢–µ—Å—Ç 7: –°–±—Ä–æ—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞
    print("\nüìù –¢–µ—Å—Ç 7: –°–±—Ä–æ—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞")
    result = reset_verification(parent_id, child2_login)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "‚úÖ" in result and child2_login in result, "‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞!"
    print("   ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–±—ë–Ω–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞")
    
    # –¢–µ—Å—Ç 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞
    print("\nüìù –¢–µ—Å—Ç 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞")
    result1 = check_verification(parent_id, child1_login)
    result2 = check_verification(parent_id, child2_login)
    result3 = check_verification(parent_id, child3_login)
    print(f"   –†–µ–±—ë–Ω–æ–∫ 1: {result1}")
    print(f"   –†–µ–±—ë–Ω–æ–∫ 2: {result2}")
    print(f"   –†–µ–±—ë–Ω–æ–∫ 3: {result3}")
    assert result1 == f"verified|{child1_login}", "‚ùå –ü–µ—Ä–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç!"
    assert result2 == f"not_verified|{child2_login}", "‚ùå –í—Ç–æ—Ä–æ–π —Ä–µ–±—ë–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å not_verified!"
    assert result3 == f"verified|{child3_login}", "‚ùå –¢—Ä–µ—Ç–∏–π —Ä–µ–±—ë–Ω–æ–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç!"
    print("   ‚úÖ –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")
    
    # –¢–µ—Å—Ç 9: –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –≤—Å–µ—Ö –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π
    print("\nüìù –¢–µ—Å—Ç 9: –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –≤—Å–µ—Ö –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π —Ä–æ–¥–∏—Ç–µ–ª—è")
    result = reset_verification(parent_id)
    print(f"   –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
    assert "‚úÖ" in result, "‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞!"
    print("   ‚úÖ –í—Å–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–±—Ä–æ—à–µ–Ω—ã")
    
    # –¢–µ—Å—Ç 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞
    print("\nüìù –¢–µ—Å—Ç 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞")
    result1 = check_verification(parent_id, child1_login)
    result3 = check_verification(parent_id, child3_login)
    print(f"   –†–µ–±—ë–Ω–æ–∫ 1: {result1}")
    print(f"   –†–µ–±—ë–Ω–æ–∫ 3: {result3}")
    assert result1 == f"not_verified|{child1_login}", "‚ùå –ü–µ—Ä–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å not_verified!"
    assert result3 == f"not_verified|{child3_login}", "‚ùå –¢—Ä–µ—Ç–∏–π —Ä–µ–±—ë–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å not_verified!"
    print("   ‚úÖ –í—Å–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã")
    
    print("\n" + "="*60)
    print("üéâ –í–°–ï –¢–ï–°–¢–´ –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–• –õ–û–ì–ò–ù–û–í –ü–†–û–ô–î–ï–ù–´!")
    print("="*60)


def cleanup_test_data():
    """–û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
    test_user_id_1 = 999888777
    test_user_id_2 = 111222333
    reset_verification(test_user_id_1)
    reset_verification(test_user_id_2)
    print("\nüßπ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã")


if __name__ == "__main__":
    try:
        # –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Ç–µ—Å—Ç—ã
        test_verification_flow()
        test_multiple_children()
        
        # –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        print("\n\n" + "="*60)
        print("üèÜ –í–°–ï –¢–ï–°–¢–´ –£–°–ü–ï–®–ù–û –ü–†–û–ô–î–ï–ù–´!")
        print("="*60)
        
        cleanup_test_data()
    except AssertionError as e:
        print(f"\n‚ùå –û–®–ò–ë–ö–ê –¢–ï–°–¢–ê: {e}")
        cleanup_test_data()
        sys.exit(1)
    except Exception as e:
        print(f"\n‚ùå –ù–ï–ü–†–ï–î–í–ò–î–ï–ù–ù–ê–Ø –û–®–ò–ë–ö–ê: {e}")
        import traceback
        traceback.print_exc()
        cleanup_test_data()
        sys.exit(1)
