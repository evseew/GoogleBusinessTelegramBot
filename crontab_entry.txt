# Google Business Bot - автозапуск и обновления
# Автозапуск бота после перезагрузки сервера
@reboot cd /Users/test/Local_code/GoogleBusinessBot && sleep 30 && ./start_bot.sh

# Ежедневная ротация логов в 1:00 утра (до всех остальных задач)
0 1 * * * cd /Users/test/Local_code/GoogleBusinessBot && ./rotate_logs.sh >> logs/logrotate.log 2>&1

# Ежедневное обновление групп из Google Sheets в 2:00 утра
0 2 * * * cd /Users/test/Local_code/GoogleBusinessBot && ./scripts/update_groups.sh >> logs/groups_update.log 2>&1

# Ежедневное обновление базы знаний в 3:00 утра
0 3 * * * cd /Users/test/Local_code/GoogleBusinessBot && ./update_db.sh >> logs/cron_update.log 2>&1

# Еженедельная перезагрузка бота (по воскресеньям в 4:00) для очистки памяти
0 4 * * 0 cd /Users/test/Local_code/GoogleBusinessBot && ./restart.sh >> logs/cron_restart.log 2>&1

# Обновление данных 1С (новая схема):
# Каждый час - балансы и бонусы (contracts)
0 * * * * /Users/test/Local_code/GoogleBusinessBot/scripts/sync_1c_hourly.sh >> /Users/test/Local_code/GoogleBusinessBot/logs/sync_hourly.log 2>&1
# Каждые 4 часа - транзакции (transactions)
0 */4 * * * /Users/test/Local_code/GoogleBusinessBot/scripts/sync_1c_4hourly.sh >> /Users/test/Local_code/GoogleBusinessBot/logs/sync_4hourly.log 2>&1
# Раз в сутки в 6:00 - данные клиентов (clients)
0 6 * * * /Users/test/Local_code/GoogleBusinessBot/scripts/sync_1c_daily.sh >> /Users/test/Local_code/GoogleBusinessBot/logs/sync_daily.log 2>&1