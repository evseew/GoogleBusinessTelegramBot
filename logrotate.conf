# Конфигурация ротации логов для Google Business Bot
# Использование: logrotate -s logrotate.state logrotate.conf

/Users/test/Local_code/GoogleBusinessBot/logs/bot.log {
    # Ротация по времени - каждый день
    daily
    
    # Хранить 30 последних дней
    rotate 30
    
    # Сжимать старые логи
    compress
    delaycompress
    
    # Создавать новый файл после ротации
    create 644 test staff
    
    # Не ругаться, если файл отсутствует
    missingok
    
    # Не ротировать пустые файлы
    notifempty
    
    # Действия после ротации (опционально - отправить сигнал боту для переоткрытия файла)
    # postrotate
    #     # Перезапускаем бот для переоткрытия файла
    #     systemctl reload google-business-bot 2>/dev/null || true
    # endscript
}

# Также ротируем другие логи
/Users/test/Local_code/GoogleBusinessBot/logs/db_update.log {
    weekly
    rotate 4
    compress
    create 644 test staff
    missingok
    notifempty
}

/Users/test/Local_code/GoogleBusinessBot/logs/supervisor.out {
    weekly
    rotate 4
    compress
    create 644 test staff
    missingok
    notifempty
}

