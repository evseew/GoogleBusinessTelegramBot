# üîê –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Ñ–∏–ª–∏–∞–ª–∞ (`create_pyrus_task`) –±–æ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞** –ø–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ö–ª–∏–µ–Ω—Ç—É –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–≤–æ–¥–∏—Ç—å:
- –§–ò–û —Ä–æ–¥–∏—Ç–µ–ª—è
- –¢–µ–ª–µ—Ñ–æ–Ω
- –§–ò–û —Ä–µ–±—ë–Ω–∫–∞
- –ù–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã
- –§–∏–ª–∏–∞–ª (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω)

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –î–ª—è —Ç–µ–∫—É—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (—É–∂–µ —É—á–∞—Ç—Å—è –≤ —à–∫–æ–ª–µ):

1. **–ö–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É**
2. **–ë–æ—Ç –ø—Ä–æ—Å–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞** ‚Üí `find_clients_by_phone()`
3. **–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é** ‚Üí `check_verification()`
4. –ï—Å–ª–∏ –ù–ï –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Ä–µ–±—ë–Ω–∫–∞, –ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí `save_verification()`
5. **–ë–æ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `create_pyrus_task()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
   - `telegram_user_id` ‚Äî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
   - `login` ‚Äî –ª–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç –∏–∑ –±–∞–∑—ã
   - `branch_name` ‚Äî —Ñ–∏–ª–∏–∞–ª
   - `message_text` ‚Äî —Å—É—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è
6. ‚ú® **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –±–∞–∑—ã!**

### –î–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (–Ω–µ—Ç –≤ –±–∞–∑–µ):

–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ ‚Äî –±–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `get_verified_client_data()` (client_tools.py)

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞:

```python
def get_verified_client_data(login: str) -> Optional[Dict]:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    {
        'login': str,
        'client_name': str,  # –§–ò–û —Ä–æ–¥–∏—Ç–µ–ª—è
        'client_phone': str,  # –¢–µ–ª–µ—Ñ–æ–Ω
        'student_name': str,  # –§–ò–û —Ä–µ–±—ë–Ω–∫–∞ (–ø–æ–ª–Ω–æ–µ)
        'group_number': int,  # –ù–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã
        'branch_name': str,   # –§–∏–ª–∏–∞–ª
        'teacher': str        # –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
    }
    """
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è Pyrus, –Ω–æ –∏ –¥–ª—è –ª—é–±—ã—Ö –±—É–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π!**

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `create_pyrus_task()` (pyrus_tools.py)

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `telegram_user_id: Optional[int]` ‚Äî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- `login: Optional[str]` ‚Äî –õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç –∫–ª–∏–µ–Ω—Ç–∞

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã `telegram_user_id` + `login` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `get_verified_client_data()`
- –í—Å–µ –ø–æ–ª—è (`client_name`, `client_phone`, `student_name`, `group_number`) –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–∑ –±–∞–∑—ã
- –ï—Å–ª–∏ –∫–∞–∫–æ–µ-—Ç–æ –ø–æ–ª–µ –ø–µ—Ä–µ–¥–∞–Ω–æ —è–≤–Ω–æ ‚Äî –æ–Ω–æ –ù–ï –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è

### 3. –û–±–Ω–æ–≤–ª—ë–Ω system prompt (instructions/system_prompt.md)

–î–æ–±–∞–≤–ª–µ–Ω **–®–∞–≥ 3: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ** –≤ –∞–ª–≥–æ—Ä–∏—Ç–º —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞—â–µ–Ω–∏–π:
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è LLM –æ —Ç–æ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
- –ü—Ä–∏–º–µ—Ä—ã –¥–∏–∞–ª–æ–≥–æ–≤ —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏ `create_pyrus_task`

### 4. –û–±–Ω–æ–≤–ª—ë–Ω description —Ç—É–ª–∞

–í `PYRUS_FUNCTION_DESCRIPTION` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:
- –ö–∞–∫ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
- –ö–æ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `telegram_user_id` –∏ `login`
- –ß—Ç–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **UX:** –ö–ª–∏–µ–Ω—Ç –Ω–µ –≤–≤–æ–¥–∏—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –º–Ω–æ–≥–æ —Ä–∞–∑  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –í–°–ï–ì–î–ê  
‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (clients.json)  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –§—É–Ω–∫—Ü–∏—è `get_verified_client_data()` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –±—É–¥—É—â–∏—Ö —Ñ–∏—á–∞—Ö  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:** –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è –∏ –±–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤)

---

## –ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞

**–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ (–±–µ–∑ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è):**
```
–ö–ª–∏–µ–Ω—Ç: –•–æ—á—É —á—Ç–æ–±—ã –º–Ω–µ –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–ª–∏
–ë–æ—Ç: –ü–æ–¥—Å–∫–∞–∂–∏—Ç–µ –∏–º—è —Ä–µ–±—ë–Ω–∫–∞ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω
–ö–ª–∏–µ–Ω—Ç: –ú–∏—à–∞, 89123456789
–ë–æ—Ç: –ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?
–ö–ª–∏–µ–Ω—Ç: –ú–∞—Ä–∏—è
–ë–æ—Ç: –í –∫–∞–∫–æ–º —Ñ–∏–ª–∏–∞–ª–µ?
–ö–ª–∏–µ–Ω—Ç: –ß–∏—á–µ—Ä–∏–Ω–∞
–ë–æ—Ç: [—Å–æ–∑–¥–∞—ë—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ]
```

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (—Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º):**
```
–ö–ª–∏–µ–Ω—Ç: –•–æ—á—É —á—Ç–æ–±—ã –º–Ω–µ –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–ª–∏
–ë–æ—Ç: –ù–∞–∑–æ–≤–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
–ö–ª–∏–µ–Ω—Ç: 89123456789
–ë–æ—Ç: ‚úÖ –ù–∞—à–ª–∞ –≤–∞—à–µ–≥–æ —Ä–µ–±—ë–Ω–∫–∞: –ü–µ—Ç—Ä–æ–≤ –ú–∏—Ö–∞–∏–ª, —Ñ–∏–ª–∏–∞–ª –ß–∏—á–µ—Ä–∏–Ω–∞, –≥—Ä—É–ø–ø–∞ 123. –≠—Ç–æ –≤–∞—à —Ä–µ–±—ë–Ω–æ–∫?
–ö–ª–∏–µ–Ω—Ç: –î–∞
–ë–æ—Ç: –ö–∞–∫–æ–π –≤–æ–ø—Ä–æ—Å –ø–µ—Ä–µ–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É?
–ö–ª–∏–µ–Ω—Ç: –£—Ç–æ—á–Ω–∏—Ç—å —Å—É–º–º—É –æ–ø–ª–∞—Ç—ã
–ë–æ—Ç: [—Å–æ–∑–¥–∞—ë—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ —Å –ê–í–¢–û–ó–ê–ü–û–õ–ù–ï–ù–ù–´–ú–ò –¥–∞–Ω–Ω—ã–º–∏]
```

**–≠–∫–æ–Ω–æ–º–∏—è:** 3-4 —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞! üöÄ

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º

–§—É–Ω–∫—Ü–∏—è `get_verified_client_data()` ‚Äî —ç—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π helper. –ò—Å–ø–æ–ª—å–∑—É–π –µ—ë –¥–ª—è:
- –ó–∞—è–≤–æ–∫ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- –§–æ—Ä–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –õ—é–±—ã—Ö —Ñ–æ—Ä–º, –≥–¥–µ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
from tools.client_tools import get_verified_client_data

# –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞
client_data = get_verified_client_data(login="46168")

if client_data:
    # –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
    form_data = {
        'name': client_data['client_name'],
        'phone': client_data['client_phone'],
        'student': client_data['student_name'],
        'branch': client_data['branch_name']
    }
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

‚úÖ –§—É–Ω–∫—Ü–∏—è `get_verified_client_data()` –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏  
‚úÖ –ò–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ System prompt –æ–±–Ω–æ–≤–ª—ë–Ω  
‚úÖ Descriptions —Ç—É–ª–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
